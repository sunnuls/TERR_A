# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

## 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–§–∞–π–ª `.env` —É–∂–µ —Å–æ–∑–¥–∞–Ω —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- ‚úÖ `D360_API_KEY` = DQSi7mQYdGwmx4rEqvnQRRJrAK
- ‚úÖ `D360_BASE_URL` = https://waba-v2.360dialog.io
- ‚úÖ `VERIFY_TOKEN` = terra_bot_verify_token_2024

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `ADMIN_IDS` –Ω–∞ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞!

## 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
üì° 360dialog API URL: https://waba-v2.360dialog.io
üîë API Key: DQSi7mQYdG...
üë• –ê–¥–º–∏–Ω–æ–≤: 1
üöÄ –ó–∞–ø—É—Å–∫ WhatsApp –±–æ—Ç–∞ –¥–ª—è 360dialog
üì° –°–µ—Ä–≤–µ—Ä: http://0.0.0.0:8000
üîó Webhook URL: http://0.0.0.0:8000/webhook
```

## 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç"

## 5Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ 360dialog

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok:
```bash
# Windows (—á–µ—Ä–µ–∑ chocolatey)
choco install ngrok

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å https://ngrok.com/download
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok:
```bash
ngrok http 8000
```

3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

4. –í –ø–∞–Ω–µ–ª–∏ 360dialog (hub.360dialog.com):
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª Webhooks
   - **Webhook URL**: `https://abc123.ngrok.io/webhook`
   - **Verify Token**: `terra_bot_verify_token_2024`
   - –ù–∞–∂–º–∏—Ç–µ "Verify"

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å HTTPS:
```
https://your-domain.com/webhook
```

## 6Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à WhatsApp –Ω–æ–º–µ—Ä –±–æ—Ç–∞ –≤ –ø–∞–Ω–µ–ª–∏ 360dialog
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ: `start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏

## üêõ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cat .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --upgrade
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f bot.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –≤ 360dialog
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç—É—Å "Connected"
```

### –û—à–∏–±–∫–∞ "D360_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω":
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
cat .env
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bot whats app/
‚îú‚îÄ‚îÄ bot.py              ‚Üê –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —ç—Ç–æ
‚îú‚îÄ‚îÄ config.py           ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ webhook.py          ‚Üê –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook
‚îú‚îÄ‚îÄ menu_handlers.py    ‚Üê –õ–æ–≥–∏–∫–∞ –º–µ–Ω—é
‚îú‚îÄ‚îÄ requirements.txt    ‚Üê –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env               ‚Üê –í–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ state.py       ‚Üê –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îú‚îÄ‚îÄ api_360.py     ‚Üê API –∫–ª–∏–µ–Ω—Ç
    ‚îî‚îÄ‚îÄ sheets.py      ‚Üê Google Sheets (TODO)
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò–∑–º–µ–Ω–∏—Ç–µ `ADMIN_IDS` –≤ `.env` –Ω–∞ —Å–≤–æ–π –Ω–æ–º–µ—Ä
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –≤ 360dialog
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `start`
4. –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ª–æ–≥–∏–∫—É –≤ `menu_handlers.py`
5. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Google Sheets –≤ `utils/sheets.py`

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python bot.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8000/health

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f bot.log

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
Ctrl + C
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. ‚úÖ –§–∞–π–ª `.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
2. ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip install -r requirements.txt`)
3. ‚úÖ –ü–æ—Ä—Ç 8000 —Å–≤–æ–±–æ–¥–µ–Ω
4. ‚úÖ Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ 360dialog
5. ‚úÖ API –∫–ª—é—á –≤–∞–ª–∏–¥–µ–Ω

---

**–ì–æ—Ç–æ–≤–æ! üéâ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**

