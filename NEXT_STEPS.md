# üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

- [x] **–ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞** - 16 —Ñ–∞–π–ª–æ–≤
- [x] **Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8000
- [x] **Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫** - GET/POST endpoints
- [x] **API –∫–ª–∏–µ–Ω—Ç –¥–ª—è 360dialog** - send_text, send_buttons
- [x] **FSM (–º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π)** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏
- [x] **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–µ–Ω—é** - 7 —Ñ—É–Ω–∫—Ü–∏–π-–∑–∞–≥–æ—Ç–æ–≤–æ–∫
- [x] **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - .env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤ —Ñ–∞–π–ª –∏ –∫–æ–Ω—Å–æ–ª—å
- [x] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - 6 MD —Ñ–∞–π–ª–æ–≤
- [x] **Git + GitHub** - –ø—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ 5 —à–∞–≥–æ–≤

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (2 –º–∏–Ω)

```bash
pip install -r requirements.txt
```

### –®–∞–≥ 2: –ò–∑–º–µ–Ω–∏—Ç—å ADMIN_IDS (1 –º–∏–Ω)

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:
```env
ADMIN_IDS=79991234567  # ‚Üê –í–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä!
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ (30 —Å–µ–∫)

```bash
python bot.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8000

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ngrok (2 –º–∏–Ω)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ngrok
# Windows: choco install ngrok
# Mac: brew install ngrok
# Linux: snap install ngrok

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
ngrok http 8000
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ 360dialog (3 –º–∏–Ω)

1. –ó–∞–π—Ç–∏ –Ω–∞ https://hub.360dialog.com/
2. Webhooks ‚Üí Add webhook
3. URL: `https://abc123.ngrok.io/webhook`
4. Verify Token: `terra_bot_verify_token_2024`
5. –ù–∞–∂–∞—Ç—å "Verify"

**–ì–æ—Ç–æ–≤–æ! –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `start` üéâ**

---

## üìã –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ù–µ–¥–µ–ª—è 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
2. –¢–∞–±–ª–∏—Ü—ã: users, shifts, reports
3. CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
4. –ú–∏–≥—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `utils/database.py` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- `models/user.py` - –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `models/shift.py` - –º–æ–¥–µ–ª—å —Å–º–µ–Ω—ã

**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤

### –ù–µ–¥–µ–ª—è 2: Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `utils/sheets.py`
2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth2
3. –§—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

**–§–∞–π–ª—ã:**
- `utils/sheets.py` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `credentials.json` - Google OAuth

**–í—Ä–µ–º—è:** 3-4 —á–∞—Å–∞

### –ù–µ–¥–µ–ª—è 3: –£—á—ë—Ç —Å–º–µ–Ω

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ù–∞—á–∞–ª–æ —Å–º–µ–Ω—ã (–¥–∞—Ç–∞, –≤—Ä–µ–º—è, –º–µ—Å—Ç–æ)
2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–º–µ–Ω—ã (–ø–æ–¥—Å—á—ë—Ç —á–∞—Å–æ–≤)
3. –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–§–∞–π–ª—ã:**
- `handlers/shift_handlers.py`
- –û–±–Ω–æ–≤–∏—Ç—å `menu_handlers.py`

**–í—Ä–µ–º—è:** 6-8 —á–∞—Å–æ–≤

### –ù–µ–¥–µ–ª—è 4: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º
3. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–§–∞–π–ª—ã:**
- `handlers/admin_handlers.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `ADMIN_IDS`

**–í—Ä–µ–º—è:** 4-5 —á–∞—Å–æ–≤

## üéì –û–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### Flask:
- https://flask.palletsprojects.com/
- –í–∏–¥–µ–æ: "Flask Tutorial for Beginners"

### 360dialog API:
- https://docs.360dialog.com/
- –ü—Ä–∏–º–µ—Ä—ã: https://docs.360dialog.com/whatsapp-api/whatsapp-api

### SQLite:
- https://docs.python.org/3/library/sqlite3.html
- –í–∏–¥–µ–æ: "SQLite Python Tutorial"

### Google Sheets API:
- https://developers.google.com/sheets/api
- gspread docs: https://docs.gspread.org/

## üîß –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (–¥–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
- ‚úÖ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞

### –î–ª—è —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (100-1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
1. **Gunicorn** –≤–º–µ—Å—Ç–æ Flask dev server:
```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:8000 bot:app
```

2. **Redis** –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π:
```bash
pip install redis
# –û–±–Ω–æ–≤–∏—Ç—å utils/state.py –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Redis
```

### –î–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
1. **PostgreSQL** –≤–º–µ—Å—Ç–æ SQLite
2. **Celery** –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
3. **Nginx** –∫–∞–∫ reverse proxy
4. **Docker** –¥–ª—è –¥–µ–ø–ª–æ—è
5. **Kubernetes** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** Uptime > 99%
2. **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** < 2 —Å–µ–∫—É–Ω–¥—ã
3. **–û—à–∏–±–∫–∏:** < 1% –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –¥–µ–Ω—å
5. **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:** –ú–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ TODO

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Google Sheets —ç–∫—Å–ø–æ—Ä—Ç

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n)
- [ ] –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

## üí° –ò–¥–µ–∏ –¥–ª—è —Ñ–∏—á

1. **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:** –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
2. **–§–æ—Ç–æ –æ—Ç—á—ë—Ç—ã:** –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Å –º–µ—Å—Ç–∞ —Ä–∞–±–æ—Ç—ã
3. **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è:** –û—Ç–º–µ—Ç–∫–∞ –º–µ—Å—Ç–∞ —Ä–∞–±–æ—Ç—ã
4. **QR –∫–æ–¥—ã:** –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–º–µ–Ω—ã
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–º–µ–Ω–∞—Ö
6. **–ì—Ä–∞—Ñ–∏–∫–∏:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
7. **–≠–∫—Å–ø–æ—Ä—Ç:** PDF –æ—Ç—á—ë—Ç—ã
8. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** 1C, Bitrix24, –∏ –¥—Ä.

## üéÅ –ë–æ–Ω—É—Å—ã

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ (Windows):

–°–æ–∑–¥–∞–π—Ç–µ `start_bot.bat`:
```batch
@echo off
cd "C:\BOTIKI\bot whats app"
python bot.py
pause
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ (Linux):

–°–æ–∑–¥–∞–π—Ç–µ systemd service:
```bash
sudo nano /etc/systemd/system/whatsapp-bot.service
```

```ini
[Unit]
Description=WhatsApp Bot 360dialog
After=network.target

[Service]
Type=simple
User=youruser
WorkingDirectory=/path/to/bot
ExecStart=/usr/bin/python3 bot.py
Restart=always

[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl enable whatsapp-bot
sudo systemctl start whatsapp-bot
```

## üìû –ü–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:**
   - README.md - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - QUICKSTART.md - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - ARCHITECTURE.md - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - TESTING_GUIDE.md - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **–õ–æ–≥–∏:**
   - `tail -f bot.log` - —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏

3. **–û—Ç–ª–∞–¥–∫–∞:**
   - –î–æ–±–∞–≤—å—Ç–µ `import pdb; pdb.set_trace()` –¥–ª—è breakpoint
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `print()` –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ webhook –≤ 360dialog

## ‚ú® –£—Å–ø–µ—Ö–æ–≤ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!

–í–∞—à –ø—Ä–æ–µ–∫—Ç —É–∂–µ –∏–º–µ–µ—Ç:
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- ‚úÖ –ß–∏—Å—Ç—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- ‚úÖ –ì–æ—Ç–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É!**

---

## üìå Quick Links

- GitHub: https://github.com/sunnuls/TERRA-Whatsapp-
- 360dialog: https://hub.360dialog.com/
- Flask Docs: https://flask.palletsprojects.com/
- Python Docs: https://docs.python.org/3/

**–•–æ—Ä–æ—à–µ–≥–æ –∫–æ–¥–∏–Ω–≥–∞! üöÄ**

