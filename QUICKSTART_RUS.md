# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç ‚Äî WhatsApp Bot

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –Ω–∞ Windows.

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```powershell
# 1. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv

# 2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)
# PowerShell:
.\.venv\Scripts\Activate.ps1
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ExecutionPolicy, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
# Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# CMD:
.venv\Scripts\activate.bat

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

```powershell
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä
copy env.example .env

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±–ª–æ–∫–Ω–æ—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å
notepad .env
```

**–ß—Ç–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
```
D360_API_KEY=–≤–∞—à_–∫–ª—é—á_–æ—Ç_360dialog
VERIFY_TOKEN=–ø—Ä–∏–¥—É–º–∞–π—Ç–µ_—Å–µ–∫—Ä–µ—Ç–Ω—É—é_—Å—Ç—Ä–æ–∫—É_–Ω–∞–ø—Ä–∏–º–µ—Ä_abc123xyz789
PORT=8000
MODE=dev
```

## –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç A ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π:**
```powershell
run.bat
```

**–í–∞—Ä–∏–∞–Ω—Ç B ‚Äî –í—Ä—É—á–Ω—É—é:**

–û–∫–Ω–æ 1 (Flask):
```powershell
python bot.py
```

–û–∫–Ω–æ 2 (ngrok):
```powershell
start_ngrok.bat
# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ: ngrok http 8000
```

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 360dialog

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:4040 (–∞–¥–º–∏–Ω–∫–∞ ngrok)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc-123.ngrok.io`)
3. –û—Ç–∫—Ä–æ–π—Ç–µ [hub.360dialog.com](https://hub.360dialog.com)
4. Webhooks ‚Üí Webhook URL: `https://abc-123.ngrok.io/webhook`
5. Verify Token: –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –≤–∞—à–µ–≥–æ `.env` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abc123xyz789`)
6. –í–∫–ª—é—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è: "Incoming messages", "Message status"
7. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

## –®–∞–≥ 5: –¢–µ—Å—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ WhatsApp
2. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞ –Ω–æ–º–µ—Ä –±–æ—Ç–∞: **"–º–µ–Ω—é"**
3. –î–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ –∫–Ω–æ–ø–∫–∏
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞ —Å–µ–≥–æ–¥–Ω—è"
5. –í—ã–±–µ—Ä–∏—Ç–µ —Å–º–µ–Ω—É
6. –ü–æ–ª—É—á–∏—Ç–µ "–°–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∞–Ω–∞ ‚úÖ"

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç. –ö–æ–º–∞–Ω–¥—ã:
- `–º–µ–Ω—é` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ö–Ω–æ–ø–∫–∞ "–ú–æ–π —Å—Ç–∞—Ç—É—Å" ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –∑–∞–ø–∏—Å–∏

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

**403 –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤–µ–±—Ö—É–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ VERIFY_TOKEN –≤ .env –∏ 360dialog ‚Äî –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å

**–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω: http://localhost:4040
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Flask ‚Äî –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å POST –∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ 360dialog –≤–∫–ª—é—á–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è

**"D360_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω":**
- –§–∞–π–ª .env –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –í .env –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞: `D360_API_KEY=–≤–∞—à_–∫–ª—é—á`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `README.md`
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `python scripts/mock_payloads.py full`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è: http://localhost:8000/health

