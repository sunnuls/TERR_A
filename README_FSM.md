# ü§ñ WhatsApp Bot —Å FSM - –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## ‚úÖ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞ 100%**

- ‚úÖ 360dialog Cloud API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ FSM (–ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π) —Å 5 —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- ‚úÖ –ü–æ–ª–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ webhook.py
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ menu_handlers.py
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ utils/state.py
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ utils/sheets.save_entry()

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements_whatsapp.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env_whatsapp_example.txt`:

```env
D360_API_KEY=your_360dialog_api_key_here
D360_BASE_URL=https://waba-v2.360dialog.io
VERIFY_TOKEN=your_verify_token_here
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8000/health

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ FSM
python test_fsm.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 360dialog API (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
python test_360dialog_api.py
```

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å

```
START
  ‚îÇ
  ‚ñº
1. MAIN_MENU
   –ö–Ω–æ–ø–∫–∏: [–†–∞–±–æ—Ç–∞] [–ò–Ω—Ñ–æ –æ —á–∞—Å–∞—Ö] [–ü–æ–º–æ—â—å]
  ‚îÇ
  ‚ñº –ù–∞–∂–∞—Ç–∞ "–†–∞–±–æ—Ç–∞"
  ‚îÇ
2. SELECT_WORK
   –°–ø–∏—Å–æ–∫: [–ü–æ–ª–µ] [–ö–∞–±–∞—á–æ–∫] [–ö–∞—Ä—Ç–æ—à–∫–∞] [–î—Ä—É–≥–æ–µ]
  ‚îÇ
  ‚ñº –í—ã–±—Ä–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞
  ‚îÇ
3. SELECT_SHIFT
   –°–ø–∏—Å–æ–∫: [–°–º–µ–Ω–∞ 1 (8-16)] [–°–º–µ–Ω–∞ 2 (16-00)] [–°–º–µ–Ω–∞ 3 (00-8)]
  ‚îÇ
  ‚ñº –í—ã–±—Ä–∞–Ω–∞ —Å–º–µ–Ω–∞
  ‚îÇ
4. SELECT_HOURS
   –°–ø–∏—Å–æ–∫: [4 —á–∞—Å–∞] [6 —á–∞—Å–æ–≤] [8 —á–∞—Å–æ–≤] [12 —á–∞—Å–æ–≤]
  ‚îÇ
  ‚ñº –í—ã–±—Ä–∞–Ω—ã —á–∞—Å—ã
  ‚îÇ
5. CONFIRM_SAVE
   –ü–æ–∫–∞–∑ —Å–≤–æ–¥–∫–∏ + –ö–Ω–æ–ø–∫–∏: [‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [‚ùå –û—Ç–º–µ–Ω–∞]
  ‚îÇ
  ‚ñº –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
  ‚îÇ
–°–û–•–†–ê–ù–ï–ù–ò–ï ‚Üí save_entry(phone, work, shift, hours)
  ‚îÇ
  ‚ñº
–í–æ–∑–≤—Ä–∞—Ç –≤ MAIN_MENU
```

### –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: start

ü§ñ –ë–æ—Ç: –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ TERRA Bot!
       –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:
       [üìã –†–∞–±–æ—Ç–∞] [‚è∞ –ò–Ω—Ñ–æ –æ —á–∞—Å–∞—Ö] [‚ùì –ü–æ–º–æ—â—å]

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–ù–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É "–†–∞–±–æ—Ç–∞"]

ü§ñ –ë–æ—Ç: üìã –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞–±–æ—Ç—ã:
       [üåæ –ü–æ–ª–µ] [ü•í –ö–∞–±–∞—á–æ–∫] [ü•î –ö–∞—Ä—Ç–æ—à–∫–∞] [üì¶ –î—Ä—É–≥–æ–µ]

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–í—ã–±—Ä–∞–ª "–ü–æ–ª–µ"]

ü§ñ –ë–æ—Ç: ‚úÖ –†–∞–±–æ—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞: –ü–æ–ª–µ
       ‚è∞ –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ —Å–º–µ–Ω—É:
       [‚òÄÔ∏è –°–º–µ–Ω–∞ 1 (8-16)] [üåÜ –°–º–µ–Ω–∞ 2 (16-00)] [üåô –°–º–µ–Ω–∞ 3 (00-8)]

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–í—ã–±—Ä–∞–ª "–°–º–µ–Ω–∞ 1 (8-16)"]

ü§ñ –ë–æ—Ç: ‚úÖ –†–∞–±–æ—Ç–∞: –ü–æ–ª–µ
       ‚úÖ –°–º–µ–Ω–∞: 8-16
       ‚è±Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤:
       [4 —á–∞—Å–∞] [6 —á–∞—Å–æ–≤] [8 —á–∞—Å–æ–≤] [12 —á–∞—Å–æ–≤]

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–í—ã–±—Ä–∞–ª "8 —á–∞—Å–æ–≤"]

ü§ñ –ë–æ—Ç: üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:
       ‚ñ´Ô∏è –†–∞–±–æ—Ç–∞: –ü–æ–ª–µ
       ‚ñ´Ô∏è –°–º–µ–Ω–∞: 8-16
       ‚ñ´Ô∏è –ß–∞—Å–æ–≤: 8
       –í—Å–µ –≤–µ—Ä–Ω–æ?
       [‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [‚ùå –û—Ç–º–µ–Ω–∞]

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–ù–∞–∂–∞–ª "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"]

ü§ñ –ë–æ—Ç: ‚úÖ –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!
       üìã –†–∞–±–æ—Ç–∞: –ü–æ–ª–µ
       ‚è∞ –°–º–µ–Ω–∞: 8-16
       ‚è±Ô∏è –ß–∞—Å–æ–≤: 8
       –°–ø–∞—Å–∏–±–æ! –í–æ–∑–≤—Ä–∞—â–∞—é –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é...
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bot whats app/
‚îÇ
‚îú‚îÄ‚îÄ bot.py                          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª, Flask —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ webhook.py                      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π + FSM —Ä–æ—É—Ç–∏–Ω–≥
‚îú‚îÄ‚îÄ menu_handlers.py                # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM
‚îú‚îÄ‚îÄ config.py                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (get_headers)
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py                 # –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ state.py                    # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ sheets.py                   # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (save_entry)
‚îÇ   ‚îî‚îÄ‚îÄ api_360.py                  # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ
‚îú‚îÄ‚îÄ test_fsm.py                     # –¢–µ—Å—Ç—ã FSM
‚îú‚îÄ‚îÄ test_360dialog_api.py           # –¢–µ—Å—Ç—ã 360dialog API
‚îÇ
‚îú‚îÄ‚îÄ FSM_GUIDE.md                    # –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ FSM
‚îú‚îÄ‚îÄ FSM_IMPLEMENTATION_COMPLETE.md  # –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ FSM
‚îú‚îÄ‚îÄ USAGE_EXAMPLE.md                # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
‚îú‚îÄ‚îÄ IMPLEMENTATION_COMPLETE.md      # –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ 360dialog API
‚îÇ
‚îú‚îÄ‚îÄ requirements_whatsapp.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ .env                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é)
```

## üîß API –§—É–Ω–∫—Ü–∏–∏

### bot.py

```python
from bot import send_message, send_buttons, send_list

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
send_message("79991234567", {
    "type": "text",
    "text": {"body": "–ü—Ä–∏–≤–µ—Ç!"}
})

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ (–º–∞–∫—Å–∏–º—É–º 3)
send_buttons("79991234567", "–í—ã–±–µ—Ä–∏—Ç–µ:", [
    {"id": "btn1", "title": "–ö–Ω–æ–ø–∫–∞ 1"},
    {"id": "btn2", "title": "–ö–Ω–æ–ø–∫–∞ 2"}
])

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
send_list("79991234567", "–í—ã–±–µ—Ä–∏—Ç–µ:", "–û—Ç–∫—Ä—ã—Ç—å", [
    {"title": "–°–µ–∫—Ü–∏—è", "rows": [
        {"id": "row1", "title": "–°—Ç—Ä–æ–∫–∞ 1", "description": "–û–ø–∏—Å–∞–Ω–∏–µ"}
    ]}
])
```

### utils/state.py

```python
from utils.state import get_state, set_state, clear_state, States

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
set_state("79991234567", States.SELECT_WORK)

# –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
state = get_state("79991234567")
current_state = state.get('state')  # "SELECT_WORK"

# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
clear_state("79991234567")

# –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
from utils.state import update_user_data, get_user_data

update_user_data("79991234567", "work", "–ü–æ–ª–µ")
work = get_user_data("79991234567", "work")  # "–ü–æ–ª–µ"
```

### utils/sheets.py

```python
from utils.sheets import save_entry

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å
save_entry("79991234567", "–ü–æ–ª–µ", "8-16", "8")
# –ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞ - –ª–æ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
# TODO: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets API
```

## üé® –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –¢–∏–ø—ã —Ä–∞–±–æ—Ç (menu_handlers.py)

```python
WORK_TYPES = {
    "work_field": "–ü–æ–ª–µ",
    "work_zucchini": "–ö–∞–±–∞—á–æ–∫",
    "work_potato": "–ö–∞—Ä—Ç–æ—à–∫–∞",
    "work_other": "–î—Ä—É–≥–æ–µ"
}
```

### –°–º–µ–Ω—ã

```python
SHIFTS = {
    "shift_1": {"title": "–°–º–µ–Ω–∞ 1 (8-16)", "hours": "8-16"},
    "shift_2": {"title": "–°–º–µ–Ω–∞ 2 (16-00)", "hours": "16-00"},
    "shift_3": {"title": "–°–º–µ–Ω–∞ 3 (00-8)", "hours": "00-8"}
}
```

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤

```python
HOURS_OPTIONS = {
    "hours_4": "4",
    "hours_6": "6",
    "hours_8": "8",
    "hours_12": "12"
}
```

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `bot.log`:

```
2024-11-07 12:34:56 - webhook - INFO - [MSG] –û—Ç 79991234567, —Ç–∏–ø: text, —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM: None
2024-11-07 12:34:56 - menu_handlers - INFO - [FSM] 79991234567: MAIN_MENU
2024-11-07 12:34:57 - __main__ - INFO - [SEND] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è 79991234567
2024-11-07 12:34:57 - __main__ - INFO - [OK] –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 79991234567
2024-11-07 12:35:00 - webhook - INFO - [MSG] –û—Ç 79991234567, —Ç–∏–ø: interactive, —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM: MAIN_MENU
2024-11-07 12:35:00 - webhook - INFO - [BUTTON] 79991234567: work_menu (–†–∞–±–æ—Ç–∞)
2024-11-07 12:35:00 - menu_handlers - INFO - [FSM] 79991234567: SELECT_WORK
...
2024-11-07 12:36:00 - utils.sheets - INFO - [SAVE] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏: {'phone': '79991234567', 'work': '–ü–æ–ª–µ', 'shift': '8-16', 'hours': '8'}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç—ã FSM

```bash
python test_fsm.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì PASSED  –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚úì PASSED  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚úì PASSED  –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
‚úì PASSED  –ü–æ–ª–Ω—ã–π FSM –ø–æ—Ç–æ–∫
‚úì PASSED  –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ò—Ç–æ–≥–æ: 5/5 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
‚úì –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ! üéâ
```

### –¢–µ—Å—Ç—ã 360dialog API

```bash
python test_360dialog_api.py
```

–¢—Ä–µ–±—É–µ—Ç—Å—è:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º
2. –ò–∑–º–µ–Ω–∏—Ç—å `TEST_PHONE` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **FSM_GUIDE.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ FSM —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
- **FSM_IMPLEMENTATION_COMPLETE.md** - –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ FSM
- **USAGE_EXAMPLE.md** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è 360dialog API
- **IMPLEMENTATION_COMPLETE.md** - –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ 360dialog API

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- [x] 360dialog Cloud API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [x] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (button reply)
- [x] –°–ø–∏—Å–∫–∏ (list message)
- [x] FSM —Å 5 —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ webhook
- [x] –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≥–ª—É—à–∫–∞)
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã
- [x] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- [x] –¢–µ—Å—Ç—ã FSM
- [x] –¢–µ—Å—Ç—ã API

### üöß TODO (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets API
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite/PostgreSQL)
- [ ] Redis –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üéØ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–†–∞–±–æ—Ç–∞—é—Ç –∏–∑ **–ª—é–±–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:

| –ö–æ–º–∞–Ω–¥–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `start`, `—Å—Ç–∞—Ä—Ç`, `menu`, `/start` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `help`, `–ø–æ–º–æ—â—å`, `/help` | –°–ø—Ä–∞–≤–∫–∞ |
| `cancel`, `–æ—Ç–º–µ–Ω–∞`, `stop` | –û—Ç–º–µ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è |

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 360dialog API

- –ö–Ω–æ–ø–∫–∏ (buttons): –º–∞–∫—Å–∏–º—É–º 3 –∫–Ω–æ–ø–∫–∏
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–Ω–æ–ø–∫–∏: –º–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤
- –°–ø–∏—Å–æ–∫ (list): –º–∞–∫—Å–∏–º—É–º 10 —Å–µ–∫—Ü–∏–π, 10 —Å—Ç—Ä–æ–∫ –≤ —Å–µ–∫—Ü–∏–∏
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–æ–∫–∏ —Å–ø–∏—Å–∫–∞: –º–∞–∫—Å–∏–º—É–º 24 —Å–∏–º–≤–æ–ª–∞
- –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏: –º–∞–∫—Å–∏–º—É–º 72 —Å–∏–º–≤–æ–ª–∞

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

- –°–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (—Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ)
- save_entry() - –∑–∞–≥–ª—É—à–∫–∞ (–ª–æ–≥–∏—Ä—É–µ—Ç, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Google Sheets)
- –ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø–∏—Å–µ–π

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
- Webhook –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `VERIFY_TOKEN`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `FSM_GUIDE.md` –∏ `USAGE_EXAMPLE.md`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `python test_fsm.py`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `bot.log`

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ | ~1500 |
| –§–∞–π–ª–æ–≤ Python | 10 |
| –°–æ—Å—Ç–æ—è–Ω–∏–π FSM | 5 |
| –¢–∏–ø–æ–≤ —Ä–∞–±–æ—Ç | 4 |
| –°–º–µ–Ω | 3 |
| –í–∞—Ä–∏–∞–Ω—Ç–æ–≤ —á–∞—Å–æ–≤ | 4 |
| –¢–µ—Å—Ç–æ–≤ FSM | 5 |
| –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | 100% |

## üéâ –ì–æ—Ç–æ–≤–æ!

**–ë–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ó–∞–ø—É—Å—Ç–∏—Ç–µ `python bot.py` –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ "start" –≤ WhatsApp.

---

**–î–∞—Ç–∞:** 7 –Ω–æ—è–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

